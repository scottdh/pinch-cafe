<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ title }}</title>
    <link rel="stylesheet" href="{{ '/css/style.css' | url }}" />
    <script>
      
      const getData = () => {
        const myRequest = new Request('https://api.tfl.gov.uk/Line/northern/Arrivals?app_id=PersonalTest&app_key=8f3ce437f95645d68849d490d34114f5');
        return fetch(myRequest)
      }
      
      const formatItem = (item) => {
        return `<div style='background-color: gray; margin: 5px; padding: 5px'>
            
            <div><span>Start: </span><span>${item.stationName}</div>
            <div><span>Destination: </span><span>${item.destinationName}</div>
            <div><span>Current location:</span><span>${item.currentLocation}</div>
            <div><span>Expected:</span><span>${item.timeToLive}</div>
          </div>`
      }

      const start = async () => {
        result = await getData();
        const element = document.getElementById('api_response_data');
        const travelData = await result.json();
        
        let response = '';
        for (i = 0; i < travelData.length; i++){
          response += formatItem(travelData[i]);
        }
        element.innerHTML = response;
      }
      start()
    </script>
  </head>
  <body>
    <header>
      <h1>Pinch Cafe</h1>
      <p>We are here to normalise vegan food without compromising on the taste and quality</p>
    </header>
    <h4>Northern Line stops</h4>
    <div id="api_response_data"></div>
    <main></main>
  </body>
</html>


